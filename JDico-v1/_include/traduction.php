<?phpinclude 'contenu.php';require('fonction.php');
 $nbElements = count($segments);//$lignes = file("lemmatisation.txt");//$nb=count($lignes);$wordArray = array();$lemmArray = array();$posArray = array();for($j=0; $j < $nbElements; $j++){$Lignes[$j]=explode("<br/>",$segments[$j]);$num=count($Lignes[$j]);for($a=0; $a < $num; $a++){$segLigne= explode(",",$Lignes[$j][$a]);/*echo "segLinge[0]=".$segLigne[0].'<br/>';echo ", segLinge[1]=";echo $segLigne[1];echo "<br/>";*/if(!empty($segLigne[0])){array_push($wordArray, substr($segLigne[0], strpos($segLigne[0], '=')+1));array_push($lemmArray, substr($segLigne[1], strpos($segLigne[1], '=')+1));array_push($posArray, substr($segLigne[2], strpos($segLigne[2], '=')+1));}//$wordArray[]= $segLigne[0];//$lemmTemp= $segLigne[2]; //Ying : pourquoi $segLigne[2] mais pas $segLigne[1]//Ying//$lemmTemp= $segLigne[1]; //$lemmTemp= explode(" ", $lemmTemp);//$lemmArray[]=$lemmTemp;//$lemmBackupArray[]=$lemmTemp[1];/*echo $lemmTemp[1];echo "<br/>";*/}}$nbrWord=count($wordArray);$lemmBackupArray=$lemmArray;//$nbrLemm=count($lemmArray);//echo 'nbrWord = '.$nbrWord.' , nbrLemm = '.$nbrLemm.'<br/>';for($l=0; $l<$nbrWord; $l++){//echo 'wordArray'.$wordArray[$l].'<br/>';	$lemmArray[$l]=rtrim($lemmArray[$l]);	if($lemmArray[$l]=='<unknown>'||empty($lemmArray[$l])) {		$lemmArray[$l]='traduction indisponible à cause de mal lemmatisé';	} else {		$lemm=$lemmArray[$l];
		//echo 'lemm = '.$lemm.'<br/>';		 		$l_serv = csv_to_array ('../_config/l_serv.csv', "\t");
  		foreach($l_serv as $k=>$v){
		if($serveur=="$k"){			//$jibiki="http://www.papillon-dictionary.org/papillon/api/DicofulUS-index/$langueSource/cdm-headword/$lemm/cdm-translation?strategy=EQUAL";			$jibiki="$v";			//echo $jibiki.'<br/>';			//echo 'dico='.$dico.', ls='.$langueSource.', lemm='.$lemm;			$jibiki = str_replace('$dico',trim($dico),$jibiki);			$jibiki = str_replace('$langueSource',trim($langueSource),$jibiki);			$jibiki = str_replace('$lemm',trim($lemm),$jibiki);			//echo $jibiki.'</br>';			$trad= file_get_contents($jibiki);			//echo $trad.'</br>';			$xml = new SimpleXMLElement($trad);			$nbrXml=count($xml);			$tradArray= array();			for ($m=0;$m<$nbrXml;$m++){				$tradArray[]= $xml->entry[$m]->headword . "<span style=\"color:blue\"> (" . $xml ->entry[$m]['lang'] . ")</span>";				$tradArray=array_unique($tradArray);			}
						}
	// fin du if	  } // fin du foreach		$lemmArray[$l]=implode("  |  ",$tradArray);			} // fin du else}?>